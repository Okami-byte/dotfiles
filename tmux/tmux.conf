#
# ████████╗███╗   ███╗██╗   ██╗██╗  ██╗
# ╚══██╔══╝████╗ ████║██║   ██║╚██╗██╔╝
#    ██║   ██╔████╔██║██║   ██║ ╚███╔╝
#    ██║   ██║╚██╔╝██║██║   ██║ ██╔██╗
#    ██║   ██║ ╚═╝ ██║╚██████╔╝██╔╝ ██╗
#    ╚═╝   ╚═╝     ╚═╝ ╚═════╝ ╚═╝  ╚═╝
#
# Terminal multiplexer
# https://github.com/tmux/tmux

source-file ~/.config/tmux/tmux.reset.conf
set -g prefix ^s
set -g base-index 1              # start indexing pane at 1 instead of 0
set -g pane-base-index 1         # start indexing pane at 1 instead of 0
set -g detach-on-destroy off     # don't exit from tmux when closing a session
set -g escape-time 0             # zero-out escape time delay
set -g history-limit 1000000     # increase history size (from 2,000)
set -g renumber-windows on       # renumber all windows when any window is closed
set -g set-clipboard on          # use system clipboard
set -g mouse on                  # set mouse on
set -g allow-passthrough on     # for image parsing 
set -g default-terminal "${TERM}"
setw -g mode-keys vi
set -g status-position top       # macOS / darwin style 
# set -g status-position bottom # A style I've seen in a youtube video 
set-option -g default-shell /opt/homebrew/bin/fish

# Instant switch to a new tmux session directory that exist
unbind -T copy-mode-vi MouseDragEnd1Pane

# tpm tmux plugin manager
set-environment -g TMUX_PLUGIN_MANAGER_PATH ~/.tmux/plugins
set -g @plugin 'tmux-plugins/tpm'

# list of tmux plugins
set -g @plugin 'catppuccin/tmux'
set -g @plugin "christoomey/vim-tmux-navigator"
set -g @plugin 'omerxx/tmux-sessionx' # default keybind "<prefix> o" to activate
set -g @plugin 'omerxx/tmux-floax' # Floating terminal
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'fcsonline/tmux-thumbs'
set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'wfxr/tmux-fzf-url'
set -g @plugin 'rickstaa/tmux-notify'
set -g @plugin 'joshmedeski/tmux-nerd-font-window-name'

# floax options
# Setting the main key to toggle the floating pane on and off
set -g @floax-bind 't'

# When the pane is toggled, using this bind pops a menu with additional options
# such as resize, fullscreen, resetting to defaults and more.
set -g @floax-bind-menu 'T'

# The default width and height of the floating pane
set -g @floax-width '50%'
set -g @floax-height '50%'

# The border color can be changed, these are the colors supported by Tmux:
# black, red, green, yellow, blue, magenta, cyan, white for the standard
# terminal colors; brightred, brightyellow and so on for the bright variants;
# colour0/color0 to colour255/color255 for the colors from the 256-color
# palette; default for the default color; or a hexadecimal RGB color such as #882244.
set -g @floax-border-color 'gray'

# The text color can also be changed, by default it's blue 
# to distinguish from the main window
# Optional colors are as shown above in @floax-border-color
set -g @floax-text-color 'peach'

# By default when floax sees a change in session path 
# it'll change the floating pane's path
# You can disable this by setting it to false
# You could also "cd -" when the pane is toggled to go back
set -g @floax-change-path 'true'

# The default session name of the floating pane is 'scratch'
# You can modify the session name with this option:
set -g @floax-session-name 'some-other-session-name'

# Change the title of the floating window
set -g @floax-title 'floax'

# Rebind tmuxsessionx keys to "'"
set -g @sessionx-bind-zo-new-window 'ctrl-y'
set -g @sessionx-auto-accept 'off'
set -g @sessionx-bind "'"
set -g @sessionx-window-height '75%'
set -g @sessionx-window-width '75%'
set -g @sessionx-zoxide-mode 'on'
set -g @sessionx-custom-paths-subdirectories 'false'
set -g @sessionx-filter-current 'false'

# Tmux fzf-url-options
set -g @fzf-url-bind 'x'
set -g @fzf-url-history-limit '2000'

##### Display Popups ##### 

bind C-g display-popup \
  -d "#{pane_current_path}" \
  -w 80% \
  -h 80% \
  -E "lazygit"
bind C-p display-popup -E "ipython"
bind C-f display-popup \
  -w 80% \
  -h 80% \
  -E 'spotify_player'
bind C-y display-popup \
  -d "#{pane_current_path}" \
  -w 90% \
  -h 90% \
  -E "yazi"
bind C-o display-popup -E "btop" \
bind C-z display-popup \
  -w 80% \
  -h 80% \
  -E 'nvim ~/.config/fish/config.fish'

##### Display Menu ##### 

# Other
set -g @continuum-restore 'on'


# Indicate active pane by colouring only half of the border in windows with 
# exactly two panes, by displaying arrow markers, by drawing both or neither.
# [off | colour | arrows | both]
set -g pane-border-indicators both


# set -g @plugin "adriankarlen/tokyo-night-tmux"
# set -g @tokyo-night-tmux_theme "rose-pine"
# set -g @tokyo-night-tmux_show_datetime 0
# set -g @tokyo-night-tmux_show_path 1
# set -g @tokyo-night-tmux_path_format relative
# set -g @tokyo-night-tmux_window_id_style dsquare
# set -g @tokyo-night-tmux_show_git 0

set -g status-bg default
set -g status-style bg=default


## Theme by 89iuv
# Configure Catppuccin
set -g @catppuccin_flavor "mocha"
set -g @catppuccin_status_background "on"
set -g @catppuccin_window_status_style "none"
set -g @catppuccin_pane_status_enabled "on"

bg="default"  # transparent
# red='#EB6F92'
# orange='#f6c177'
# rosewater='#ebbcba'
# blue='#31748f'
# sky='#9ccfd8'
# green="#95b1ac"
# iris='#c4a7e7'
# yellow="#f5e0dc"
# purple="#cba6f7"
# text="#cdd6f4"
# flamingo="#F2CDCD"
# mauve="#CBA6F7"
# maroon="#EBA0AC"
# peach="#F9E2AF"
# teal="#94E2D5"
# sky="#89DCEB"
# sapphire="#74C7EC"
# lavender="#B4BEFE"
# subtext_1="#A6ADC8"
# subtext_0="#BAC2DE"
# overlay_2="#9399B2"
# overlay_1="#7F849C"
# overlay_0="#6C7086"
# surface_2="#585B70"
# surface_1="#45475A"
# surface_0="#313244"
# mantle="#181825"
# crust="#11111B"


  red="#ff657a"
  maroon="#F29BA7"
  peach="#ff9b5e"
  yellow="#eccc81"
  green="#a8be81"
  teal="#9cd1bb"
  sky="#A6C9E5"
  sapphire="#86AACC"
  blue="#5d81ab"
  lavender="#66729C"
  mauve="#b18eab"
  text="#fcfcfa"
  surface2="#535763"
  surface1="#3a3d4b"
  surface0="#30303b"
  base="#202027"
  mantle="#1c1d22"
  crust="#171719"

# Status line settings
set -g status-style "bg=#{bg}"
set -g status-justify "absolute-centre"  # center status line

# status left style
set -g status-left-length 100
set -g status-left ""
set -ga status-left "#{?client_prefix,#{#[bg=#{bg},fg=#{red},bold]  #S},#{?pane_in_mode,#{#[bg=#{bg},fg=#{yellow},bold]  #S},#{#[bg=#{bg},fg=#{blue},bold]  #S}}}"
set -ga status-left "#[bg=#{bg},fg=#{green}]   #{=/-32/...:#{s|$USER|~|:#{b:pane_current_path}}} "

# status right style
set -g status-right ""

# window style
set -wg automatic-rename on
set -g window-status-format "#[fg=${mauve},bg=#{bg}] #I:#W#{?window_zoomed_flag, 󰁌 ,}"
set -g window-status-current-format "#[fg=${peach},bg=#{bg}] #I:#W#{?window_zoomed_flag, 󰁌 ,}"

# pane style
set -g pane-active-border-style "fg=#{lavender},bg=default"
set -g pane-border-style "fg=#{surface2},bg=default"

# message style
set -g message-command-style "bg=default,fg=#{mauve}"
set -g message-style "bg=default,fg=#{mauve}"

# selection style
set -g mode-style "bg=#{surface_0},fg=#{teal}"
set -g @catppuccin_pane_border_status "on"

run '~/.tmux/plugins/tpm/tpm'
